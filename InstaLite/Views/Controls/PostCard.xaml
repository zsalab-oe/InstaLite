<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="InstaLite.Views.Controls.PostCard">
    <VerticalStackLayout Spacing="8" Padding="0,8">
        <!-- Header -->
        <Grid ColumnDefinitions="Auto,*,Auto" Padding="12,0">
            <Image Grid.Column="0" Source="{Binding User.AvatarUrl}" StyleClass="avatar"/>
            <Label Grid.Column="1" Text="{Binding User.Username}" VerticalOptions="Center" FontAttributes="Bold" />
            <Label Grid.Column="2" Text="{Binding TimeAgo}" VerticalOptions="Center" StyleClass="subtitle" />
        </Grid>

        <!-- Image -->
        <Grid>
            <Image Source="{Binding ImageUrl}">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer NumberOfTapsRequired="2" Tapped="OnDoubleTapped"/>
                    <TapGestureRecognizer NumberOfTapsRequired="1" Tapped="OnSingleTapped"/>
                </Image.GestureRecognizers>
            </Image>
        </Grid>

        <!-- Actions -->
        <Grid ColumnDefinitions="Auto,Auto,*,Auto" Padding="12,4,12,0">
            <Button Grid.Column="0" Text="Like" 
                    Clicked="LikeClicked" />
            <Button Grid.Column="1" Text="ðŸ’¬" Clicked="CommentClicked"/>
            <Label Grid.Column="3" Text="{Binding Likes}" VerticalOptions="Center" FontAttributes="Bold" />
        </Grid>

        <!-- Caption -->
        <StackLayout Padding="12,0,12,8">
            <Label>
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="{Binding User.Username}" FontAttributes="Bold"/>
                        <Span Text=" " />
                        <Span Text="{Binding Caption}" />
                    </FormattedString>
                </Label.FormattedText>
            </Label>
        </StackLayout>

        <BoxView HeightRequest="1" BackgroundColor="{AppThemeBinding Light=#eee, Dark=#222}" />
    </VerticalStackLayout>
</ContentView>
